[package]
categories = ["embedded", "no-std"]
edition = "2021"
name = "bm13xx-chain"
rust-version = "1.86.0"
version = "0.2.0"

[dependencies]
bm13xx-asic = { path = "../bm13xx-asic" }
bm13xx-protocol = { path = "../bm13xx-protocol" }

defmt = { workspace = true, optional = true }
derive_more = { workspace = true, features = ["from"] }
embedded-hal = { workspace = true }
embedded-hal-async = { workspace = true }
embedded-io-async = { workspace = true }
fugit = { workspace = true }
heapless = { workspace = true }
log = { workspace = true, optional = true }
rustversion = { workspace = true }

[features]
defmt = [
    "dep:defmt",
    "bm13xx-asic/defmt",
    "bm13xx-protocol/defmt",
    "embedded-hal/defmt-03",
    "embedded-hal-async/defmt-03",
    "embedded-io-async/defmt-03",
    "fugit/defmt",
    "heapless/defmt",
]

[dev-dependencies]
bm1366 = { path = "../bm1366" }
embedded-hal-bus = { version = "0.2.0", features = ["std", "async"] }
embedded-io = { version = "0.6", features = ["std"] }
env_logger = "0.11"
ftdi-embedded-hal = { version = "0.22.1", features = ["ftdi"] }
inquire = "0.7"
ftdi = { version = "0.1.3" }
linux-embedded-hal = "0.4"
tokio = { version = "1.38", features = ["macros", "time", "rt-multi-thread"] }
tokio-serial = "5.4"

[[example]]
name = "bm13xx-cli"
path = "examples/cli.rs"

[[example]]
name = "bitcrane-s19jpro"
path = "examples/bitcrane-s19jpro.rs"
